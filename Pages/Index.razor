@page "/Intercom/"
@page "/"

<PageTitle>Heylo, Intercom!</PageTitle>

<AuthorizeView>
    <Authorized>

        <MudButton Disabled="@_processing"
                   OnClick="ProcessDoorToggleRequest"
                   Variant="Variant.Filled"
                   Size="Size.Large"
                   Color="Color.Primary"
                   StartIcon="@Icons.Material.Filled.LockClock"
                   Style="height: 60px;"
                   FullWidth="true">
            @if (_processing)
            {
                <MudText Class="ms-2">Unlocking...</MudText>
                <MudProgressCircular Class="mx-4" Size="Size.Small" Indeterminate="true" />
            }
            else
            {
                <MudText>Toggle Door State</MudText>
            }
        </MudButton>

        <MudNumericField Value="_duration_ms" T="int" ValueChanged="DurationChangedRequest" Label="Duration (ms)" Variant="Variant.Outlined" Step="1" Max="4200" Min="600" Class="mt-10" />

    </Authorized>
    <NotAuthorized>
        <MudText Typo="Typo.body2">You are not authorised to access this page.</MudText>
    </NotAuthorized>
</AuthorizeView>